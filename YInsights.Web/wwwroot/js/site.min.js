(function(n){n.widget("ui.tagit",{options:{allowDuplicates:!1,caseSensitive:!0,fieldName:"tags",placeholderText:null,readOnly:!1,removeConfirmation:!1,tagLimit:null,availableTags:[],autocomplete:{},showAutocompleteOnFocus:!1,allowSpaces:!0,singleField:!1,singleFieldDelimiter:",",singleFieldNode:null,animate:!0,tabIndex:null,beforeTagAdded:null,afterTagAdded:null,beforeTagRemoved:null,afterTagRemoved:null,onTagClicked:null,onTagLimitExceeded:null,onTagAdded:null,onTagRemoved:null,tagSource:null},_create:function(){var t=this,r,u,f,i;this.element.is("input")?(this.tagList=n("<ul><\/ul>").insertAfter(this.element),this.options.singleField=!0,this.options.singleFieldNode=this.element,this.element.addClass("tagit-hidden-field")):this.tagList=this.element.find("ul, ol").andSelf().last();this.tagInput=n('<input type="text" />').addClass("ui-widget-content");this.options.readOnly&&this.tagInput.attr("disabled","disabled");this.options.tabIndex&&this.tagInput.attr("tabindex",this.options.tabIndex);this.options.placeholderText&&this.tagInput.attr("placeholder",this.options.placeholderText);this.options.autocomplete.source||(this.options.autocomplete.source=function(t,i){var u=t.term.toLowerCase(),r=n.grep(this.options.availableTags,function(n){return n.toLowerCase().indexOf(u)===0});this.options.allowDuplicates||(r=this._subtractArray(r,this.assignedTags()));i(r)});this.options.showAutocompleteOnFocus&&(this.tagInput.focus(function(){t._showAutocomplete()}),typeof this.options.autocomplete.minLength=="undefined"&&(this.options.autocomplete.minLength=0));n.isFunction(this.options.autocomplete.source)&&(this.options.autocomplete.source=n.proxy(this.options.autocomplete.source,this));n.isFunction(this.options.tagSource)&&(this.options.tagSource=n.proxy(this.options.tagSource,this));this.tagList.addClass("tagit").addClass("ui-widget ui-widget-content form-control").append(n('<li class="tagit-new"><\/li>').append(this.tagInput)).click(function(i){var u=n(i.target),r;u.hasClass("tagit-label")?(r=u.closest(".tagit-choice"),r.hasClass("removed")||t._trigger("onTagClicked",i,{tag:r,tagLabel:t.tagLabel(r)})):t.tagInput.focus()});r=!1;this.options.singleField&&(this.options.singleFieldNode?(u=n(this.options.singleFieldNode),f=u.val().split(this.options.singleFieldDelimiter),u.val(""),n.each(f,function(n,i){t.createTag(i,null,!0);r=!0})):(this.options.singleFieldNode=n('<input type="hidden" style="display:none;" value="" name="'+this.options.fieldName+'" />'),this.tagList.after(this.options.singleFieldNode)));r||this.tagList.children("li").each(function(){n(this).hasClass("tagit-new")||(t.createTag(n(this).text(),n(this).attr("class"),!0),n(this).remove())});this.tagInput.keydown(function(i){if(i.which==n.ui.keyCode.BACKSPACE&&t.tagInput.val()===""){var r=t._lastTag();!t.options.removeConfirmation||r.hasClass("remove")?t.removeTag(r):t.options.removeConfirmation&&r.addClass("remove ui-state-highlight")}else t.options.removeConfirmation&&t._lastTag().removeClass("remove ui-state-highlight");(i.which===n.ui.keyCode.COMMA&&i.shiftKey===!1||i.which===n.ui.keyCode.ENTER||i.which==n.ui.keyCode.TAB&&t.tagInput.val()!==""||i.which==n.ui.keyCode.SPACE&&t.options.allowSpaces!==!0&&(n.trim(t.tagInput.val()).replace(/^s*/,"").charAt(0)!='"'||n.trim(t.tagInput.val()).charAt(0)=='"'&&n.trim(t.tagInput.val()).charAt(n.trim(t.tagInput.val()).length-1)=='"'&&n.trim(t.tagInput.val()).length-1!=0))&&(i.which===n.ui.keyCode.ENTER&&t.tagInput.val()===""||i.preventDefault(),t.options.autocomplete.autoFocus&&t.tagInput.data("autocomplete-open")||(t.tagInput.autocomplete("close"),t.createTag(t._cleanedInput())))}).blur(function(){t.tagInput.data("autocomplete-open")||t.createTag(t._cleanedInput())});(this.options.availableTags||this.options.tagSource||this.options.autocomplete.source)&&(i={select:function(n,i){return t.createTag(i.item.value),!1}},n.extend(i,this.options.autocomplete),i.source=this.options.tagSource||i.source,this.tagInput.autocomplete(i).bind("autocompleteopen.tagit",function(){t.tagInput.data("autocomplete-open",!0)}).bind("autocompleteclose.tagit",function(){t.tagInput.data("autocomplete-open",!1)}),this.tagInput.autocomplete("widget").addClass("tagit-autocomplete"))},destroy:function(){return n.Widget.prototype.destroy.call(this),this.element.unbind(".tagit"),this.tagList.unbind(".tagit"),this.tagInput.removeData("autocomplete-open"),this.tagList.removeClass("tagit tagit-hidden-field form-control"),this.element.is("input")?(this.element.removeClass("tagit-hidden-field"),this.tagList.remove()):(this.element.children("li").each(function(){n(this).hasClass("tagit-new")?n(this).remove():(n(this).removeClass("tagit-choice remove tagit-choice-editable tagit-choice-read-only badge"),n(this).text(n(this).children(".tagit-label").text()))}),this.singleFieldNode&&this.singleFieldNode.remove()),this},_cleanedInput:function(){return n.trim(this.tagInput.val().replace(/^"(.*)"$/,"$1"))},_lastTag:function(){return this.tagList.find(".tagit-choice:last:not(.removed)")},_tags:function(){return this.tagList.find(".tagit-choice:not(.removed)")},assignedTags:function(){var i=this,t=[];return this.options.singleField?(t=n(this.options.singleFieldNode).val().split(this.options.singleFieldDelimiter),t[0]===""&&(t=[])):this._tags().each(function(){t.push(i.tagLabel(this))}),t},_updateSingleTagsField:function(t){n(this.options.singleFieldNode).val(t.join(this.options.singleFieldDelimiter)).trigger("change")},_subtractArray:function(t,i){for(var u=[],r=0;r<t.length;r++)n.inArray(t[r],i)==-1&&u.push(t[r]);return u},tagLabel:function(t){return this.options.singleField?n(t).find(".tagit-label:first").text():n(t).find("input:first").val()},_showAutocomplete:function(){this.tagInput.autocomplete("search","")},_findTagByLabel:function(t){var i=this,r=null;return this._tags().each(function(){if(i._formatStr(t)==i._formatStr(i.tagLabel(this)))return r=n(this),!1}),r},_isNew:function(n){return!this._findTagByLabel(n)},_formatStr:function(t){return this.options.caseSensitive?t:n.trim(t.toLowerCase())},_effectExists:function(t){return Boolean(n.effects&&(n.effects[t]||n.effects.effect&&n.effects.effect[t]))},createTag:function(t,i,r){var s=this,f,e,u,h,c,l,o;if(t=n.trim(t),this.options.preprocessTag&&(t=this.options.preprocessTag(t)),t==="")return!1;if(!this.options.allowDuplicates&&!this._isNew(t))return f=this._findTagByLabel(t),this._trigger("onTagExists",null,{existingTag:f,duringInitialization:r})!==!1&&this._effectExists("highlight")&&f.effect("highlight"),!1;if(this.options.tagLimit&&this._tags().length>=this.options.tagLimit)return this._trigger("onTagLimitExceeded",null,{duringInitialization:r}),!1;(e=n(this.options.onTagClicked?'<a class="tagit-label"><\/a>':'<span class="tagit-label"><\/span>').text(t),u=n("<li><\/li>").addClass("tagit-choice badge").addClass(i).append(e),this.options.readOnly?u.addClass("tagit-choice-read-only"):(u.addClass("tagit-choice-editable"),h=n("<span>x<\/span>").addClass("close"),c=n('<a><span class="text-icon">×<\/span><\/a>').addClass("tagit-close").append(h).click(function(){s.removeTag(u)}),u.append(c)),this.options.singleField||(l=e.html(),u.append('<input type="hidden" value="'+l+'" name="'+this.options.fieldName+'" class="tagit-hidden-field" />')),this._trigger("beforeTagAdded",null,{tag:u,tagLabel:this.tagLabel(u),duringInitialization:r})!==!1)&&(this.options.singleField&&(o=this.assignedTags(),o.push(t),this._updateSingleTagsField(o)),this._trigger("onTagAdded",null,u),this.tagInput.val(""),this.tagInput.parent().before(u),this._trigger("afterTagAdded",null,{tag:u,tagLabel:this.tagLabel(u),duringInitialization:r}),this.options.showAutocompleteOnFocus&&!r&&setTimeout(function(){s._showAutocomplete()},0))},removeTag:function(t,i){var r,e,u,f;(i=typeof i=="undefined"?this.options.animate:i,t=n(t),this._trigger("onTagRemoved",null,t),this._trigger("beforeTagRemoved",null,{tag:t,tagLabel:this.tagLabel(t)})!==!1)&&(this.options.singleField&&(r=this.assignedTags(),e=this.tagLabel(t),r=n.grep(r,function(n){return n!=e}),this._updateSingleTagsField(r)),i?(t.addClass("removed"),u=this._effectExists("blind")?["blind",{direction:"horizontal"},"fast"]:["fast"],f=this,u.push(function(){t.remove();f._trigger("afterTagRemoved",null,{tag:t,tagLabel:f.tagLabel(t)})}),t.fadeOut("fast").hide.apply(t,u).dequeue()):(t.remove(),this._trigger("afterTagRemoved",null,{tag:t,tagLabel:this.tagLabel(t)})))},removeTagByLabel:function(n,t){var i=this._findTagByLabel(n);if(!i)throw"No such tag exists with the name '"+n+"'";this.removeTag(i,t)},removeAll:function(){var n=this;this._tags().each(function(t,i){n.removeTag(i,!1)})}})})(jQuery);
/*!
 * wordcloud2.js
 * http://timdream.org/wordcloud2.js/
 *
 * Copyright 2011 - 2013 Tim Chien
 * Released under the MIT license
 */
window.setImmediate||(window.setImmediate=function(){return window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function(){if(!window.postMessage||!window.addEventListener)return null;var n=[undefined],t="zero-timeout-message",i=function(i){var r=n.length;return n.push(i),window.postMessage(t+r.toString(36),"*"),r};return window.addEventListener("message",function(i){if(typeof i.data=="string"&&i.data.substr(0,t.length)===t){i.stopImmediatePropagation();var r=parseInt(i.data.substr(t.length),36);n[r]&&(n[r](),n[r]=undefined)}},!0),window.clearImmediate=function(t){n[t]&&(n[t]=undefined)},i}()||function(n){window.setTimeout(n,0)}}());window.clearImmediate||(window.clearImmediate=function(){return window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(n){window.clearTimeout(n)}}()),function(n){var i=function(){var n=document.createElement("canvas"),t;return!n||!n.getContext?!1:(t=n.getContext("2d"),!t.getImageData)?!1:t.fillText?Array.prototype.some?Array.prototype.push?!0:!1:!1:!1}(),r=function(){if(i){for(var n=document.createElement("canvas").getContext("2d"),t=20,r,u;t;){if(n.font=t.toString(10)+"px sans-serif",n.measureText("Ｗ").width===r&&n.measureText("m").width===u)return t+1;r=n.measureText("Ｗ").width;u=n.measureText("m").width;t--}return 0}}(),u=function(n){for(var i,r,t=n.length;t;i=Math.floor(Math.random()*t),r=n[--t],n[t]=n[i],n[i]=r);return n},t=function(n,t){function et(n,t){return"hsl("+(Math.random()*360).toFixed()+","+(Math.random()*30+70).toFixed()+"%,"+(Math.random()*(t-n)+n).toFixed()+"%)"}var f,v,tt,p;if(i){if(Array.isArray(n)||(n=[n]),n.forEach(function(t,i){if(typeof t=="string"){if(n[i]=document.getElementById(t),!n[i])throw"The element id specified is not found.";}else if(!t.tagName&&!t.appendChild)throw"You must pass valid HTML elements, or ID of the element.";}),f={list:[],fontFamily:'"Trebuchet MS", "Heiti TC", "微軟正黑體", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",minSize:0,weightFactor:1,clearCanvas:!0,backgroundColor:"#fff",gridSize:8,drawOutOfBound:!1,origin:null,drawMask:!1,maskColor:"rgba(255,0,0,0.3)",maskGapWidth:.3,wait:0,abortThreshold:0,abort:function(){},minRotation:-Math.PI/2,maxRotation:Math.PI/2,shuffle:!0,rotateRatio:.1,shape:"circle",ellipticity:.65,classes:null,hover:null,click:null},t)for(v in t)v in f&&(f[v]=t[v]);if(typeof f.weightFactor!="function"&&(tt=f.weightFactor,f.weightFactor=function(n){return n*tt}),typeof f.shape!="function")switch(f.shape){case"circle":default:f.shape="circle";break;case"cardioid":f.shape=function(n){return 1-Math.sin(n)};break;case"diamond":case"square":f.shape=function(n){var t=n%(Math.PI/2);return 1/(Math.cos(t)+Math.sin(t))};break;case"triangle-forward":f.shape=function(n){var t=n%(2*Math.PI/3);return 1/(Math.cos(t)+Math.sqrt(3)*Math.sin(t))};break;case"triangle":case"triangle-upright":f.shape=function(n){var t=(n+Math.PI*3/2)%(2*Math.PI/3);return 1/(Math.cos(t)+Math.sqrt(3)*Math.sin(t))};break;case"pentagon":f.shape=function(n){var t=(n+.955)%(2*Math.PI/5);return 1/(Math.cos(t)+.726543*Math.sin(t))};break;case"star":f.shape=function(n){var t=(n+.955)%(Math.PI/5);return(n+.955)%(2*Math.PI/5)-Math.PI/5>=0?1/(Math.cos(Math.PI/5-t)+3.07768*Math.sin(Math.PI/5-t)):1/(Math.cos(t)+3.07768*Math.sin(t))}}f.gridSize=Math.max(Math.floor(f.gridSize),4);var e=f.gridSize,it=e-f.maskGapWidth,rt=Math.abs(f.maxRotation-f.minRotation),ut=Math.min(f.maxRotation,f.minRotation),h,o,s,c,y,ft,l;switch(f.color){case"random-dark":l=function(){return et(10,50)};break;case"random-light":l=function(){return et(50,90)};break;default:typeof f.color=="function"&&(l=f.color)}p=null;typeof f.classes=="function"&&(p=f.classes);var w=!1,b=[],k,ot=function(n){var i=n.currentTarget,t=i.getBoundingClientRect(),r,u;n.touches?(r=n.touches[0].clientX,u=n.touches[0].clientY):(r=n.clientX,u=n.clientY);var f=r-t.left,o=u-t.top,s=Math.floor(f*(i.width/t.width||1)/e),h=Math.floor(o*(i.height/t.height||1)/e);return b[s][h]},st=function(n){var t=ot(n);if(k!==t){if(k=t,!t){f.hover(undefined,undefined,n);return}f.hover(t.item,t.dimension,n)}},d=function(n){var t=ot(n);t&&(f.click(t.item,t.dimension,n),n.preventDefault())},g=[],ht=function(n){var u;if(g[n])return g[n];var t=n*8,i=t,r=[];for(n===0&&r.push([c[0],c[1],0]);i--;)u=1,f.shape!=="circle"&&(u=f.shape(i/t*2*Math.PI)),r.push([c[0]+n*u*Math.cos(-i/t*2*Math.PI),c[1]+n*u*Math.sin(-i/t*2*Math.PI)*f.ellipticity,i/t*2*Math.PI]);return g[n]=r,r},nt=function(){return f.abortThreshold>0&&(new Date).getTime()-ft>f.abortThreshold},ct=function(){return f.rotateRatio===0?0:Math.random()>f.rotateRatio?0:rt===0?ut:ut+Math.random()*rt},lt=function(n,t,i){var a=!1,l=f.weightFactor(t),o,v,u,et;if(l<=f.minSize)return!1;o=1;l<r&&(o=function(){for(var n=2;n*l<r;)n+=2;return n}());v=document.createElement("canvas");u=v.getContext("2d",{willReadFrequently:!0});u.font=f.fontWeight+" "+(l*o).toString(10)+"px "+f.fontFamily;var b=u.measureText(n).width/o,y=Math.max(l*o,u.measureText("m").width,u.measureText("Ｗ").width)/o,k=b+y*2,d=y*3,st=Math.ceil(k/e),ht=Math.ceil(d/e);k=st*e;d=ht*e;var tt=-b/2,it=-y*.4,p=Math.ceil((k*Math.abs(Math.sin(i))+d*Math.abs(Math.cos(i)))/e),w=Math.ceil((k*Math.abs(Math.cos(i))+d*Math.abs(Math.sin(i)))/e),g=w*e,rt=p*e;if(v.setAttribute("width",g),v.setAttribute("height",rt),a&&(document.body.appendChild(v),u.save()),u.scale(1/o,1/o),u.translate(g*o/2,rt*o/2),u.rotate(-i),u.font=f.fontWeight+" "+(l*o).toString(10)+"px "+f.fontFamily,u.fillStyle="#000",u.textBaseline="middle",u.fillText(n,tt*o,(it+l*.5)*o),et=u.getImageData(0,0,g,rt).data,nt())return!1;a&&(u.strokeRect(tt*o,it,b*o,y*o),u.restore());for(var ot=[],c=w,h,ut,ft,s=[p/2,w/2,p/2,w/2];c--;)for(h=p;h--;){ft=e;n:{while(ft--)for(ut=e;ut--;)if(et[((h*e+ft)*g+(c*e+ut))*4+3]){ot.push([c,h]);c<s[3]&&(s[3]=c);c>s[1]&&(s[1]=c);h<s[0]&&(s[0]=h);h>s[2]&&(s[2]=h);a&&(u.fillStyle="rgba(255, 0, 0, 0.5)",u.fillRect(c*e,h*e,e-.5,e-.5));break n}a&&(u.fillStyle="rgba(0, 0, 255, 0.5)",u.fillRect(c*e,h*e,e-.5,e-.5))}}return a&&(u.fillStyle="rgba(0, 255, 0, 0.5)",u.fillRect(s[3]*e,s[0]*e,(s[1]-s[3]+1)*e,(s[2]-s[0]+1)*e)),{mu:o,occupied:ot,bounds:s,gw:w,gh:p,fillTextOffsetX:tt,fillTextOffsetY:it,fillTextWidth:b,fillTextHeight:y,fontSize:l}},at=function(n,t,i,r,u){for(var l=u.length,e,c;l--;){if(e=n+u[l][0],c=t+u[l][1],e>=o||c>=s||e<0||c<0){if(!f.drawOutOfBound)return!1;continue}if(!h[e][c])return!1}return!0},vt=function(t,i,r,u,o,s,h,c,a){var y=r.fontSize,w,b,k,v;w=l?l(u,o,y,s,h):f.color;b=p?p(u,o,y,s,h):f.classes;v=r.bounds;k={x:(t+v[3])*e,y:(i+v[0])*e,w:(v[1]-v[3]+1)*e,h:(v[2]-v[0]+1)*e};n.forEach(function(n){var o,s,h,l,v,p,k;if(n.getContext)o=n.getContext("2d"),s=r.mu,o.save(),o.scale(1/s,1/s),o.font=f.fontWeight+" "+(y*s).toString(10)+"px "+f.fontFamily,o.fillStyle=w,o.translate((t+r.gw/2)*e*s,(i+r.gh/2)*e*s),c!==0&&o.rotate(-c),o.textBaseline="middle",o.fillText(u,r.fillTextOffsetX*s,(r.fillTextOffsetY+y*.5)*s),o.restore();else{h=document.createElement("span");l="";l="rotate("+-c/Math.PI*180+"deg) ";r.mu!==1&&(l+="translateX(-"+r.fillTextWidth/4+"px) scale("+1/r.mu+")");v={position:"absolute",display:"block",font:f.fontWeight+" "+y*r.mu+"px "+f.fontFamily,left:(t+r.gw/2)*e+r.fillTextOffsetX+"px",top:(i+r.gh/2)*e+r.fillTextOffsetY+"px",width:r.fillTextWidth+"px",height:r.fillTextHeight+"px",lineHeight:y+"px",whiteSpace:"nowrap",transform:l,webkitTransform:l,msTransform:l,transformOrigin:"50% 40%",webkitTransformOrigin:"50% 40%",msTransformOrigin:"50% 40%"};w&&(v.color=w);h.textContent=u;for(p in v)h.style[p]=v[p];if(a)for(k in a)h.setAttribute(k,a[k]);b&&(h.className+=b);n.appendChild(h)}})},yt=function(t,i,r,u,f){if(!(t>=o)&&!(i>=s)&&!(t<0)&&!(i<0)){if(h[t][i]=!1,r){var c=n[0].getContext("2d");c.fillRect(t*e,i*e,it,it)}w&&(b[t][i]={item:f,dimension:u})}},pt=function(t,i,r,u,h,c){var b=h.occupied,k=f.drawMask,a,d,l,v,y,p;for(k&&(a=n[0].getContext("2d"),a.save(),a.fillStyle=f.maskColor),w&&(l=h.bounds,d={x:(t+l[3])*e,y:(i+l[0])*e,w:(l[1]-l[3]+1)*e,h:(l[2]-l[0]+1)*e}),v=b.length;v--;)(y=t+b[v][0],p=i+b[v][1],y>=o||p>=s||y<0||p<0)||yt(y,p,k,d,c);k&&a.restore()},wt=function(n){var e,h,a,l,t,i,c,v,r,p;if((Array.isArray(n)?(e=n[0],h=n[1]):(e=n.word,h=n.weight,a=n.attributes),l=ct(),t=lt(e,h,l),!t)||nt()||!f.drawOutOfBound&&(i=t.bounds,i[1]-i[3]+1>o||i[2]-i[0]+1>s))return!1;for(c=y+1,v=function(i){var r=Math.floor(i[0]-t.gw/2),u=Math.floor(i[1]-t.gh/2),f=t.gw,o=t.gh;return at(r,u,f,o,t.occupied)?(vt(r,u,t,e,h,y-c,i[2],l,a),pt(r,u,f,o,t,n),!0):!1};c--;)if(r=ht(y-c),f.shuffle&&(r=[].concat(r),u(r)),p=r.some(v),p)return!0;return!1},a=function(t,i,r){if(i)return!n.some(function(n){var u=document.createEvent("CustomEvent");return u.initCustomEvent(t,!0,i,r||{}),!n.dispatchEvent(u)},this);n.forEach(function(n){var u=document.createEvent("CustomEvent");u.initCustomEvent(t,!0,i,r||{});n.dispatchEvent(u)},this)},bt=function(){var t=n[0],it,i,r,u,l,rt,ut,et,ot,g,v,p;if(t.getContext?(o=Math.ceil(t.width/e),s=Math.ceil(t.height/e)):(it=t.getBoundingClientRect(),o=Math.ceil(it.width/e),s=Math.ceil(it.height/e)),a("wordcloudstart",!0)){if(c=f.origin?[f.origin[0]/e,f.origin[1]/e]:[o/2,s/2],y=Math.floor(Math.sqrt(o*o+s*s)),h=[],!t.getContext||f.clearCanvas)for(n.forEach(function(n){if(n.getContext){var t=n.getContext("2d");t.fillStyle=f.backgroundColor;t.clearRect(0,0,o*(e+1),s*(e+1));t.fillRect(0,0,o*(e+1),s*(e+1))}else n.textContent="",n.style.backgroundColor=f.backgroundColor,n.style.position="relative"}),i=o;i--;)for(h[i]=[],r=s;r--;)h[i][r]=!0;else{for(l=document.createElement("canvas").getContext("2d"),l.fillStyle=f.backgroundColor,l.fillRect(0,0,1,1),rt=l.getImageData(0,0,1,1).data,ut=t.getContext("2d").getImageData(0,0,o*e,s*e).data,i=o;i--;)for(h[i]=[],r=s;r--;){ot=e;n:while(ot--)for(et=e;et--;)for(u=4;u--;)if(ut[((r*e+ot)*o*e+(i*e+et))*4+u]!==rt[u]){h[i][r]=!1;break n}h[i][r]!==!1&&(h[i][r]=!0)}ut=l=rt=undefined}if(f.hover||f.click){for(w=!0,i=o+1;i--;)b[i]=[];f.hover&&t.addEventListener("mousemove",st);f.click&&(t.addEventListener("click",d),t.addEventListener("touchstart",d),t.addEventListener("touchend",function(n){n.preventDefault()}),t.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)");t.addEventListener("wordcloudstart",function ct(){t.removeEventListener("wordcloudstart",ct);t.removeEventListener("mousemove",st);t.removeEventListener("click",d);k=undefined})}u=0;f.wait!==0?(g=window.setTimeout,v=window.clearTimeout):(g=window.setImmediate,v=window.clearImmediate);var lt=function(t,i){n.forEach(function(n){n.addEventListener(t,i)},this)},ht=function(t,i){n.forEach(function(n){n.removeEventListener(t,i)},this)},tt=function tt(){ht("wordcloudstart",tt);v(p)};lt("wordcloudstart",tt);p=g(function at(){if(u>=f.list.length){v(p);a("wordcloudstop",!1);ht("wordcloudstart",tt);return}ft=(new Date).getTime();var n=wt(f.list[u]),t=!a("wordclouddrawn",!0,{item:f.list[u],drawn:n});if(nt()||t){v(p);f.abort();a("wordcloudabort",!1);a("wordcloudstop",!1);ht("wordcloudstart",tt);return}u++;p=g(at,f.wait)},f.wait)}};bt()}};t.isSupported=i;t.minFontSize=r;typeof define=="function"&&define.amd?(n.WordCloud=t,define("wordcloud",[],function(){return t})):typeof module!="undefined"&&module.exports?module.exports=t:n.WordCloud=t}(this);